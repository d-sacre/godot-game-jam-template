extends Node

################################################################################
#### AUTOLOAD REMARKS ##########################################################
################################################################################
# The scene this script is attached to is autoloaded as "AudioManager".
################################################################################
################################################################################
################################################################################

################################################################################
#### REQUIREMENTS ##############################################################
################################################################################
# This script expects the following AutoLoads:                                 
# - DictionaryParsing: res//utils/DictionaryParsing.gd
################################################################################
################################################################################
################################################################################

################################################################################
#### PRIVATE MEMBER VARIABLES ##################################################
################################################################################
var _busAliasLUT : Dictionary = {
	"master":  "Master",
	"sfx": {
		"ui":  "UI",
		"ambience":  "Ambience",
		"game": "Game"
	},
	"music":  "Music"
}

################################################################################
#### PUBLIC MEMBER FUNCTIONS ###################################################
################################################################################
func set_bus_level(keyChain : Array, value : float) -> void:
	var _tmp_busName = DictionaryParsing.get_by_key_chain_safe(self._busAliasLUT, keyChain)
	var _tmp_decibel = linear_to_db(value/100)

	AudioServer.set_bus_volume_db(AudioServer.get_bus_index(_tmp_busName), _tmp_decibel)
